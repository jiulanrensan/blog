## 进程(process)和线程(thread)的区别
比较系统的解释，但是有点抽象:
> * 进程： 指在系统中正在运行的一个应用程序。程序一旦运行就是进程。进程是资源分配的最小单位
> * 线程：系统分配处理器时间资源的基本单元，进程之内独立执行的一个单元执行流。线程是程序执行的最小单位

知乎上很形象的比喻
> 做个简单的比喻：进程=火车，线程=车厢
> * 线程在进程下行进（单纯的车厢无法运行）
> * 一个进程可以包含多个线程（一辆火车可以有多个车厢）
> * 不同进程间数据很难共享（一辆火车上的乘客很难换到另外一辆火车，比如站点换乘）
> * 同一进程下不同线程间数据很易共享（A车厢换到B车厢很容易）
> * 进程要比线程消耗更多的计算机资源（采用多列火车相比多个车厢更耗资源）
> * 进程间不会相互影响，一个线程挂掉将导致整个进程挂掉（一列火车不会影响到另外一列火车，但是如果一列火车上中间的一节车厢着火了，将影响到所有车厢）
> * 进程可以拓展到多机，进程最多适合多核（不同火车可以开在多个轨道上，同一火车的车厢不能在行进的不同的轨道上）
> * 进程使用的内存地址可以上锁，即一个线程使用某些共享内存时，其他线程必须等它结束，才能使用这一块内存。（比如火车上的洗手间）－"互斥锁"
> * 进程使用的内存地址可以限定使用量（比如火车上的餐厅，最多只允许多少人进入，如果满了需要在门口等，等有人出来了才能进去）－“信号量”

一般通用的叫法： 单线程和多线程，都是指在一个进程内的单和多

## 浏览器的多进程
> 浏览器是多进程的。在Chrome中打开一个网页相当于起了一个进程

### 浏览器内核
简单来说浏览器内核是通过取得页面内容、整理信息（应用CSS）、计算和组合最终输出可视化的图像结果，通常也被称为渲染引擎。从上面我们可以知道，Chrome浏览器为每个tab页面单独启用进程，因此每个tab网页都有由其独立的渲染引擎实例。

浏览器内核是多线程。

一个浏览器通常由以下常驻线程构成：
* GUI渲染线程
* JavaScript引擎线程
* 定时触发器线程
* 事件触发线程
* 异步http请求线程

#### 1. GUI渲染线程
* 负责渲染浏览器界面，解析html,css,构建dom树，render树，布局和绘制等
* 当界面需要重绘(repaint)或者回流(reflow)时，该线程会执行
* GUI线程与js引擎线程是互斥的，当js引擎执行时，GUI线程会被挂起，GUI更新会被保存在一个队列中，等到js引擎空闲时立即被执行

#### 2. js引擎线程
* 也称js内核，负责处理js脚本，例如v8引擎
* 一个进程中只有一个js线程。javascript是单线程的
* js线程与GUI线程是互斥的，所以如果js执行时间较长，就会造成页面渲染不连贯

#### 3. 事件触发线程
* 归属于浏览器而不是js引擎，用来控制事件循环（可以理解为js引擎自己都忙不过来，需要浏览器另开线程控制）
* 当js引擎执行`setTimeout`时，会将对应任务添加到事件线程中
* 当对应的事件符合触发条件而被触发时，该线程会把事件添加待处理队列的末尾，等待js引擎执行

#### 4. 定时触发线程
* `setTimeout`和`setInterval`所在线程
* 浏览器定时计数器并不是由javascript引擎计数的，因为js是单线程的，如果处于阻塞线程状态，就会影响计时的准确
* 因此通过单独线程来计时并触发定时，计时完毕后，添加到事件队列中，等待js引擎空闲后执行

#### 5. 异步http请求线程
* xhr连接后通过浏览器新开一个线程请求
* 检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将这个回调添加到事件队列中


> [参考文章](https://segmentfault.com/a/1190000012925872)